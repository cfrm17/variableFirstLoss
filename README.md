# Variable Maturity GiantFirstLoss Trade Valuation


A variable maturity GiantFirstLoss trade has a non-vanilla collateral debt obligation (CDO) structure, in which the maturities of the obligors in the underlying collateral pool can be different from the trade maturity.

The model has two major changes made to the payoff function of the approved GiantFirstLoss pricing template:

•	Maturity Pay Down ~ if an obligor is retired from the collateral pool before the trade maturity, the associated notional amount is paid down from the pool.  
•	Default Pay Down ~ if an obligor defaults before the trade maturity and its own maturity, the recovery is paid down from the pool.

The valuation model serves the purpose of pricing a variable maturity GiantFirstLoss trade. The trade has a non-vanilla collateral debt obligation (CDO) structure, in which the maturities of the underlying obligors could be different from that of the CDO trade (ref. https://finpricing.com/lib/FiBond.html). 

Assume the underlying collateral pool is a set of obligors, , in which each obligor has maturity , a recovery rate , and a notional amount . Let the maturity of the trade be . 

Same as with a vanilla CDO structure, the modeling of the variable maturity GiantFirstLoss trade within the current credit derivative modeling framework involves the following three procedures:

1.	The correlated defaulted events are generated by the Monte Carlo (MC) simulation via either normal copula model or Poisson model. At the present time, the approved default correlation model is the normal copula model.

2.	The losses associated with the defaulted obligors are allocated to each tranche according to the subordination of the tranche. In the variable maturity GiantFirstLoss trade as well as this loss claiming scheme, a pay down scheme of the tranches, associated with the reduction of the collateral pool due to the default events and the early retirement events of the obligors, is implemented.  For example, in a simulated scenario for the ith obligor in the collateral pool, the default time is . 

•	If , a loss with the amount   is claimed from the surviving most junior tranche and a pay down with the amount   is removed from the outstanding most senior piece. Note that in the vanilla CDO trade, this default pay down is usually ignored. 
•	If , the full notional amount  is deducted from the most senior tranche at time . This is associated with scenario of early retirement of the obligor, defined as maturity pay down. 
•	If and , the obligor is not defaulted before the maturity of the trade.

Following the usual procedure of the MC simulation, the mark-to-market (MTM) of the trade can then be calculated. The non-vanilla features of the variable maturities are illustrated in Figure 1. 	

3.	The sensitivities are calculated using weighted MC method. Currently SH3 supports the computation of WMC credit spread sensitivity, WMC default sensitivity, WMC interest rate sensitivity, recovery rate sensitivity, and carry.

The model has certain changes made to the payoff functions of the approved GiantFirstLoss pricing template. Both the default correlation model and sensitivity computation methods remain unchanged. 

The purpose of this testing is to check the implementation and asses the implications and underlying assumptions of the two non-vanilla features, which are default pay down and maturity pay down, as described above. 


Figure 1  Variable Maturity GiantFirstLoss Trade


The vanilla CDO model, named GiantFirstLoss trade, is employed as the benchmark. If we switch off the two non-vanilla features, the variable maturity GiantFirstLoss trade will become a vanilla CDO. The default pay down feature could be switched off by setting the recovery rate to zero and the maturity pay down feature could be turned off by forcing the maturities of the obligors in the collateral pool to be equal to or larger than the trade maturity. 

The testing was conducted in two phases. First, a test model, which is independent of SH3 and submitted template, was implemented.   The results under the different test scenarios, calculated by the test model and the submitted model, respectively, were compared. In the second phase, taking vanilla CDO trade as the benchmark, the effect of the non-vanilla features, namely default pay down and maturity pay down, was tested and assessed. 

Throughout the testing, a specially designed five year CDO trade is employed as the test trade, with detailed information given in Appendix I.  There are twenty obligors in the collateral pool of the test trade with the first ten obligors have the maturities smaller than the trade maturity, as shown in Appendix I.(b). In order to test the effect of both the default pay down events and the maturity pay down events, two thin tranches are put in the equity end and the super senior end, respectively.

In order to assess the recovery pay down, we first set the maturities of all the obligors to the trade maturity. Due to the presence of default pay down, a default event which happens before maturity has two effects – loss claims starting from the equity tranche and recovery pay down from the super senior tranche. If the recovery rate is zero, there is no pay down effect while if the recovery rate is one there is no loss claim. 

The change of Val01s of each tranche with respect to the recovery is shown in Table 2. Two interesting observations can be found, which verifies the implementation of the default pay down. First, for whatever recovery assumption, a default event would claim the reference amount to the investment pool (10MM in the current case). The recovery assumption only determines how to divide it into a loss amount and a pay down amount. Hence the total Val01 of the whole pool should not be affected. As shown in the last column of Table 2, this expectation is indeed observed.

Second, because in the test trade we have a symmetric tranching structure (see Appendix I.(a)), one would expect to observe symmetric behaviors between the Val01 of the 1st tranche and the 6th tranche, the 2nd tranche and the 5th tranche, etc, due to the presence of the default pay down feature.  To illustrate this phenomenon more clearly, the Val01 of the 1st tranche and the 6th tranche are shown in Figure 2.  It can be found that they are indeed symmetric. When recovery is 0.5, the Val01 of the two tranches are exactly the same. When the recovery is zero, there is no pay down and USD 44,777,124 are exactly the risk free Val01 for the 6th tranche. When the recovery is one, it seems that the two tranches are switched, meeting our expectation.

The variable maturity GiantFirstLoss trade valuation model has been investigated. Test results show that the submitted model is consistent with the model and implemented correctly. Therefore, it is approved for the purpose of marking-to-market and calculating sensitivities for such trades.

Compared with the approved GiantFirstLoss trade, two non-vanilla features, defined as default pay down and maturity pay down, are implemented in the submitted model template to model the change of the pay off function due to the early retirement of the obligor in the collateral pool. Both the default correlation model and the sensitivity computation remain unchanged.  

The modelling restriction of the variable maturity GiantFirstLoss trade is that the number of MC path should be greater than 500,000. This restriction is directly inferred from the approved GiantFirstLoss trade.  

